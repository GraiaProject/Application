# ä½¿ç”¨æ¨¡æ¿

æœ‰æ—¶å€™, å¯¹éå¸¸éå¸¸éå¸¸é•¿çš„æ¶ˆæ¯é“¾çš„æ’ç‰ˆå’Œè°ƒæ•´å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°åŒçƒ¦,
æ‰€ä»¥æˆ‘ä»¬æä¾›äº† æ¨¡æ¿(Template) æœºåˆ¶æ¥å¸®åŠ©å¼€å‘è€…ç”Ÿæˆè§„èŒƒçš„æ¶ˆæ¯é“¾.

## å®‰è£…
æ¨¡æ¿æœºåˆ¶å¹¶ä¸å†…ç½®äº Graia Application for Mirai ä¸­,
æ‰€ä»¥ä½ éœ€è¦é€šè¿‡ä½ çš„åŒ…ç®¡ç†å™¨è·å–:

``` bash
pip install graia-template
# ä½¿ç”¨ poetry
poetry add graia-template
```

## ä½¿ç”¨
å½“ä½ é¡ºåˆ©å®‰è£…äº†åº“å, ä½ å°±å¯ä»¥å¯¼å…¥å¹¶ä½¿ç”¨äº†:

``` python
from graia.template import Template
```

ä½ å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹å¼ä½¿ç”¨æ¨¡æ¿:

``` python
Template("Hello, $target!").render(
    target=At(member.id)
)
```

æˆ‘ä»¬é€šè¿‡ `$` åœ¨æ¨¡æ¿å­—ç¬¦ä¸²å†…å®šä¹‰ä¸€ä¸ªæ¨¡æ¿å—, å¹¶é€šè¿‡æ¨¡æ¿å—å®šä½, ç”Ÿæˆå‡ºæœ€åçš„æ¶ˆæ¯é“¾.

ä»¥ä¸‹æ¨¡æ¿å—æ˜¯å¯ä»¥æ¥å—çš„
```
$target
$t1
$t2
$0
$01
$02
$83123132
```

ä»¥ä¸‹æ¨¡æ¿å—æ— æ•ˆ:
```
$1aff
$-232
$<234w>
$æˆ‘ä¸æ˜¯æ¨¡æ¿å—
$ã®
$ğŸ˜ˆ
```

?> **æç¤º** ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç åˆ¤æ–­ä½ çš„æ¨¡æ¿å—æ˜¯å¦æœ‰æ•ˆ

``` python
import regex
regex.match(r"^(?|(\$[a-zA-Z_][a-zA-Z0-9_]*)|(\$[0-9]*))$", "$æˆ‘ä¸æ˜¯æ¨¡æ¿å—")
```

è·å¾— `Template` å®ä¾‹å, æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ `Template.render` æ–¹æ³•ç”Ÿæˆæ¶ˆæ¯é“¾äº†:

!> **æ³¨æ„** ç”Ÿæˆçš„æ¶ˆæ¯é“¾ä¸ä¸€å®šæ˜¯å¯ä»¥è¢«å®‰å…¨å‘é€çš„. è¿˜è®°å¾—å—?
ä½ å¯ä»¥é€šè¿‡ `MessageChain.isSendable` æ¥äº†è§£æ¶ˆæ¯é“¾æ˜¯å¦å¯ä»¥è¢«å®‰å…¨å‘é€.

``` python
Template(f"Hello, $target! åœ¨ä½ çš„ Github, ä»Šå¤©å…±æ”¶è·äº† {star_increase} ä¸ª star, Congratulations!").render(
    target=At(member.id)
)
```

`Template.render` åªæ¥å— `Union[InternalElement, ExternalElement]`,
å¹¶ä¸”æˆ‘ä»¬ä½¿ç”¨äº† `pydantic.validate_arguments` å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œæ£€æŸ¥,
æ‰€ä»¥ä½ å¾—å°å¿ƒç‚¹ä½¿ç”¨è¿™ä¸ªæ–¹æ³•.